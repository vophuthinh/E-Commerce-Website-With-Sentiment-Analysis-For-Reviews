# H·ªá Th·ªëng Th∆∞∆°ng M·∫°i ƒêi·ªán T·ª≠ V·ªõi Ph√¢n T√≠ch C·∫£m X√∫c

## üìã M√¥ t·∫£ d·ª± √°n

D·ª± √°n n√†y l√† m·ªôt n·ªÅn t·∫£ng th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ ho√†n ch·ªânh ƒë∆∞·ª£c t√≠ch h·ª£p t√≠nh nƒÉng ph√¢n t√≠ch c·∫£m x√∫c th√¥ng minh t·ª´ ƒë√°nh gi√° s·∫£n ph·∫©m c·ªßa ng∆∞·ªùi d√πng. H·ªá th·ªëng s·ª≠ d·ª•ng AI ƒë·ªÉ ph√¢n t√≠ch v√† hi·ªÉu ph·∫£n h·ªìi c·ªßa kh√°ch h√†ng, gi√∫p ng∆∞·ªùi b√°n v√† qu·∫£n tr·ªã vi√™n c√≥ c√°i nh√¨n s√¢u s·∫Øc h∆°n v·ªÅ tr·∫£i nghi·ªám mua s·∫Øm, t·ª´ ƒë√≥ c·∫£i thi·ªán ch·∫•t l∆∞·ª£ng d·ªãch v·ª• v√† s·∫£n ph·∫©m m·ªôt c√°ch hi·ªáu qu·∫£.

## ‚ú® T√≠nh nƒÉng ch√≠nh

### üõçÔ∏è Qu·∫£n l√Ω ng∆∞·ªùi d√πng
- ƒêƒÉng k√Ω v√† ƒëƒÉng nh·∫≠p cho kh√°ch h√†ng, ng∆∞·ªùi b√°n v√† qu·∫£n tr·ªã vi√™n
- X√°c th·ª±c email ƒë·ªÉ k√≠ch ho·∫°t t√†i kho·∫£n
- Qu·∫£n l√Ω profile v√† th√¥ng tin c√° nh√¢n
- Ph√¢n quy·ªÅn v√† b·∫£o m·∫≠t v·ªõi JWT

### üì¶ Qu·∫£n l√Ω s·∫£n ph·∫©m
- T·∫°o, ch·ªânh s·ª≠a v√† x√≥a s·∫£n ph·∫©m
- Upload v√† qu·∫£n l√Ω h√¨nh ·∫£nh s·∫£n ph·∫©m v·ªõi Cloudinary
- Ph√¢n lo·∫°i v√† t√¨m ki·∫øm s·∫£n ph·∫©m
- Qu·∫£n l√Ω kho h√†ng v√† s·ªë l∆∞·ª£ng t·ªìn kho

### üéØ Qu·∫£n l√Ω ƒë∆°n h√†ng
- ƒê·∫∑t h√†ng v√† theo d√µi ƒë∆°n h√†ng
- Qu·∫£n l√Ω tr·∫°ng th√°i ƒë∆°n h√†ng (ƒëang x·ª≠ l√Ω, ƒë√£ giao, ho√†n tr·∫£...)
- Xem chi ti·∫øt ƒë∆°n h√†ng

### üí≥ Thanh to√°n
- T√≠ch h·ª£p Stripe cho thanh to√°n th·∫ª t√≠n d·ª•ng
- T√≠ch h·ª£p PayPal cho thanh to√°n tr·ª±c tuy·∫øn
- Thanh to√°n an to√†n v√† b·∫£o m·∫≠t

### üéâ S·ª± ki·ªán & M√£ gi·∫£m gi√°
- T·∫°o v√† qu·∫£n l√Ω s·ª± ki·ªán khuy·∫øn m√£i
- H·ªá th·ªëng m√£ gi·∫£m gi√° (Coupon Code)
- √Åp d·ª•ng gi·∫£m gi√° t·ª± ƒë·ªông

### üí¨ Chat tr·ª±c ti·∫øp (Real-time)
- H·ªó tr·ª£ chat real-time gi·ªØa ng∆∞·ªùi d√πng v√† ng∆∞·ªùi b√°n
- G·ª≠i tin nh·∫Øn vƒÉn b·∫£n v√† h√¨nh ·∫£nh
- Theo d√µi tr·∫°ng th√°i ƒë√£ ƒë·ªçc tin nh·∫Øn
- Server Socket.io ri√™ng bi·ªát ƒë·ªÉ x·ª≠ l√Ω chat

### ü§ñ Ph√¢n t√≠ch c·∫£m x√∫c
- Ph√¢n t√≠ch c·∫£m x√∫c t·ª´ ƒë√°nh gi√° s·∫£n ph·∫©m
- S·ª≠ d·ª•ng OpenAI v√† Google Cloud Translate API
- Hi·ªÉn th·ªã k·∫øt qu·∫£ ph√¢n t√≠ch cho ng∆∞·ªùi b√°n v√† qu·∫£n tr·ªã vi√™n

### üë®‚Äçüíº Dashboard qu·∫£n tr·ªã
- Dashboard cho qu·∫£n tr·ªã vi√™n v·ªõi th·ªëng k√™ t·ªïng quan
- Qu·∫£n l√Ω ng∆∞·ªùi d√πng, ng∆∞·ªùi b√°n, s·∫£n ph·∫©m, ƒë∆°n h√†ng
- Qu·∫£n l√Ω y√™u c·∫ßu r√∫t ti·ªÅn c·ªßa ng∆∞·ªùi b√°n
- Ph√¢n t√≠ch v√† b√°o c√°o

### üè™ Dashboard ng∆∞·ªùi b√°n
- Qu·∫£n l√Ω s·∫£n ph·∫©m c·ªßa c·ª≠a h√†ng
- Qu·∫£n l√Ω ƒë∆°n h√†ng
- Theo d√µi doanh thu
- Y√™u c·∫ßu r√∫t ti·ªÅn

## üèóÔ∏è C·∫•u tr√∫c d·ª± √°n

```
Ecommerce/
‚îÇ
‚îú‚îÄ‚îÄ backend/              # Backend API Server
‚îÇ   ‚îú‚îÄ‚îÄ config/          # C·∫•u h√¨nh database, environment
‚îÇ   ‚îú‚îÄ‚îÄ controller/      # Controllers x·ª≠ l√Ω business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shop.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ event.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coupounCode.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ conversation.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ message.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ withdraw.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analyzeSentiment.js
‚îÇ   ‚îú‚îÄ‚îÄ middleware/      # Middleware x·ª≠ l√Ω authentication, errors
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ catchAsyncErrors.js
‚îÇ   ‚îú‚îÄ‚îÄ model/           # Database models (MongoDB & MySQL)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shop.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ event.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ coupounCode.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ conversation.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ messages.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ withdraw.js
‚îÇ   ‚îú‚îÄ‚îÄ utils/           # Utilities (JWT, Error Handler, Send Mail)
‚îÇ   ‚îú‚îÄ‚îÄ uploads/         # Th∆∞ m·ª•c l∆∞u file upload
‚îÇ   ‚îú‚îÄ‚îÄ app.js           # Express app configuration
‚îÇ   ‚îú‚îÄ‚îÄ server.js        # Server entry point
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ frontend/            # React Frontend Application
‚îÇ   ‚îú‚îÄ‚îÄ public/          # Static files
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/  # React components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Admin/   # Admin components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Shop/    # Shop dashboard components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Products/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Cart/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Checkout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Payment/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Profile/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Events/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Wishlist/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Signup/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Route/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/       # Page components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redux/       # Redux store, actions, reducers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/      # Route configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ styles/      # CSS/Tailwind styles
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.js    # Proxy server configuration
‚îÇ   ‚îú‚îÄ‚îÄ tailwind.config.js
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ socket/              # Socket.io Server (Real-time Chat)
‚îÇ   ‚îú‚îÄ‚îÄ index.js         # Socket server entry point
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îî‚îÄ‚îÄ README.md
```

## üõ†Ô∏è C√¥ng ngh·ªá s·ª≠ d·ª•ng

### Backend
- **Runtime**: Node.js 18.10.0
- **Framework**: Express.js
- **Database**: 
  - MongoDB v·ªõi Mongoose (cho user, product, order...)
  - MySQL v·ªõi Sequelize (cho m·ªôt s·ªë t√≠nh nƒÉng kh√°c)
- **Authentication**: JWT (JSON Web Token)
- **File Upload**: Multer, Cloudinary
- **Payment**: Stripe API
- **AI & NLP**: 
  - OpenAI API (cho ph√¢n t√≠ch c·∫£m x√∫c)
  - Google Cloud Translate API
- **Real-time**: Socket.io
- **Email**: Nodemailer
- **Others**: Bcrypt (password hashing), Cookie-parser, CORS

### Frontend
- **Framework**: React 18.2.0
- **State Management**: Redux Toolkit, React Redux
- **Routing**: React Router DOM 6.8.2
- **UI Framework**: 
  - TailwindCSS 3.2.7
  - Material-UI (MUI) 6.1.6
- **Charts**: Chart.js, React-Chartjs-2
- **Payment**: 
  - Stripe React
  - PayPal React
- **Real-time**: Socket.io-client
- **HTTP Client**: Axios
- **Others**: React Toastify, React Icons, Swiper

### Socket Server
- **Runtime**: Node.js
- **Framework**: Express.js
- **Real-time**: Socket.io 4.6.1+

## üì¶ H∆∞·ªõng d·∫´n c√†i ƒë·∫∑t

### Y√™u c·∫ßu h·ªá th·ªëng
- Node.js >= 18.10.0
- npm ho·∫∑c yarn
- MongoDB (ƒëang ch·∫°y)
- MySQL (ƒëang ch·∫°y)
- T√†i kho·∫£n Cloudinary (cho l∆∞u tr·ªØ h√¨nh ·∫£nh)
- API Key OpenAI
- API Key Google Cloud Translate (t√πy ch·ªçn)
- Stripe Account (cho thanh to√°n)
- PayPal Developer Account (cho thanh to√°n)

### 1. Clone repository

```bash
git clone <repository-url>
cd Ecommerce
```

### 2. C√†i ƒë·∫∑t Backend

```bash
cd backend
npm install
```

T·∫°o file `.env` trong th∆∞ m·ª•c `backend/config/` v·ªõi n·ªôi dung:

```env
NODE_ENV=development
PORT=8000
DB_URI=your_mongodb_connection_string
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=
DB_NAME=new-nodejs
JWT_SECRET=your_jwt_secret_key
JWT_EXPIRE=7d
COOKIE_EXPIRE=5
CLOUDINARY_NAME=your_cloudinary_name
CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret
STRIPE_SECRET_KEY=your_stripe_secret_key
STRIPE_API_KEY=your_stripe_api_key
OPENAI_API_KEY=your_openai_api_key
GOOGLE_APPLICATION_CREDENTIALS=path_to_google_credentials.json
FRONTEND_URL=http://localhost:3000
```

Ch·∫°y Backend:

```bash
npm start
# ho·∫∑c cho development
npm run dev
```

Backend s·∫Ω ch·∫°y t·∫°i: `http://localhost:8000`

### 3. C√†i ƒë·∫∑t Frontend

```bash
cd frontend
npm install
```

T·∫°o file `.env` trong th∆∞ m·ª•c `frontend/` (n·∫øu c·∫ßn):

```env
REACT_APP_SERVER_URL=http://localhost:8000
REACT_APP_SOCKET_URL=http://localhost:4000
REACT_APP_STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key
```

Ch·∫°y Frontend:

```bash
npm start
```

Frontend s·∫Ω ch·∫°y t·∫°i: `http://localhost:3000`

### 4. C√†i ƒë·∫∑t Socket Server

```bash
cd socket
npm install
```

T·∫°o file `.env` trong th∆∞ m·ª•c `socket/`:

```env
PORT=4000
```

Ch·∫°y Socket Server:

```bash
npm start
```

Socket Server s·∫Ω ch·∫°y t·∫°i: `http://localhost:4000`

## üöÄ Ch·∫°y d·ª± √°n

Sau khi c√†i ƒë·∫∑t xong, b·∫°n c·∫ßn ch·∫°y 3 server c√πng l√∫c:

### Terminal 1 - Backend
```bash
cd backend
npm start
```

### Terminal 2 - Frontend
```bash
cd frontend
npm start
```

### Terminal 3 - Socket Server
```bash
cd socket
npm start
```

M·ªü tr√¨nh duy·ªát v√† truy c·∫≠p: `http://localhost:3000`

## üìù API Endpoints

### User Routes (`/api/v2/user`)
- POST `/register` - ƒêƒÉng k√Ω ng∆∞·ªùi d√πng m·ªõi
- POST `/login` - ƒêƒÉng nh·∫≠p
- GET `/logout` - ƒêƒÉng xu·∫•t
- GET `/me` - L·∫•y th√¥ng tin ng∆∞·ªùi d√πng hi·ªán t·∫°i
- PUT `/update-profile` - C·∫≠p nh·∫≠t th√¥ng tin c√° nh√¢n
- PUT `/update-password` - ƒê·ªïi m·∫≠t kh·∫©u
- GET `/activation/:token` - K√≠ch ho·∫°t t√†i kho·∫£n

### Product Routes (`/api/v2/product`)
- GET `/get-all-products` - L·∫•y t·∫•t c·∫£ s·∫£n ph·∫©m
- GET `/get-product/:id` - L·∫•y chi ti·∫øt s·∫£n ph·∫©m
- POST `/create-product` - T·∫°o s·∫£n ph·∫©m m·ªõi (Seller)
- PUT `/update-product/:id` - C·∫≠p nh·∫≠t s·∫£n ph·∫©m (Seller)
- DELETE `/delete-product/:id` - X√≥a s·∫£n ph·∫©m (Seller)

### Order Routes (`/api/v2/order`)
- POST `/create-order` - T·∫°o ƒë∆°n h√†ng m·ªõi
- GET `/get-all-orders/:userId` - L·∫•y t·∫•t c·∫£ ƒë∆°n h√†ng
- GET `/get-order/:id` - L·∫•y chi ti·∫øt ƒë∆°n h√†ng
- PUT `/update-order-status/:id` - C·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng

### Payment Routes (`/api/v2/payment`)
- POST `/process` - X·ª≠ l√Ω thanh to√°n Stripe
- POST `/stripeapikey` - L·∫•y Stripe API key

### Conversation & Message Routes
- `/api/v2/conversation` - Qu·∫£n l√Ω cu·ªôc tr√≤ chuy·ªán
- `/api/v2/message` - G·ª≠i v√† nh·∫≠n tin nh·∫Øn

### Admin Routes
- Qu·∫£n l√Ω ng∆∞·ªùi d√πng, ng∆∞·ªùi b√°n, s·∫£n ph·∫©m, ƒë∆°n h√†ng
- X·ª≠ l√Ω y√™u c·∫ßu r√∫t ti·ªÅn

## üîê B·∫£o m·∫≠t

- JWT Authentication cho t·∫•t c·∫£ c√°c route ƒë∆∞·ª£c b·∫£o v·ªá
- Password ƒë∆∞·ª£c hash b·∫±ng bcrypt
- CORS ƒë∆∞·ª£c c·∫•u h√¨nh ƒë·ªÉ b·∫£o v·ªá API
- Cookie-based authentication
- X√°c th·ª±c email cho t√†i kho·∫£n m·ªõi

## üìÑ License

ISC

## üë®‚Äçüíª T√°c gi·∫£

- **T√°c gi·∫£**: Vo Phu Thinh
- **Email**: [vophuthinhcm@gmail.com]

## ü§ù ƒê√≥ng g√≥p

ƒê√≥ng g√≥p cho d·ª± √°n n√†y r·∫•t ƒë∆∞·ª£c hoan ngh√™nh! Vui l√≤ng:
1. Fork repository
2. T·∫°o branch m·ªõi (`git checkout -b feature/AmazingFeature`)
3. Commit c√°c thay ƒë·ªïi (`git commit -m 'Add some AmazingFeature'`)
4. Push l√™n branch (`git push origin feature/AmazingFeature`)
5. M·ªü Pull Request

Ho·∫∑c li√™n h·ªá qua email ƒë·ªÉ th·∫£o lu·∫≠n v·ªÅ c√°c thay ƒë·ªïi l·ªõn.

---

> **L∆∞u √Ω**: D·ª± √°n n√†y ƒë∆∞·ª£c ph√°t tri·ªÉn v·ªõi m·ª•c ƒë√≠ch h·ªçc t·∫≠p v√† nghi√™n c·ª©u. H√£y ƒë·∫£m b·∫£o c·∫•u h√¨nh ƒë√∫ng c√°c bi·∫øn m√¥i tr∆∞·ªùng v√† API keys tr∆∞·ªõc khi s·ª≠ d·ª•ng trong m√¥i tr∆∞·ªùng production.
